{"remainingRequest":"C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\src\\views\\user\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\src\\views\\user\\Home.vue","mtime":1756041023000},{"path":"C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1770531376377},{"path":"C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\node_modules\\vue-loader\\lib\\index.js","mtime":1770531338936}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBdXRvSW5wdXQgZnJvbSAiQC9jb21wb25lbnRzL0F1dG9JbnB1dC52dWUiOyAvLyDlr7zlhaXlsIHoo4Xlpb3nmoTovpPlhaXmoYbnu4Tku7YKaW1wb3J0IENhcm91c2VsIGZyb20gIkAvY29tcG9uZW50cy9DYXJvdXNlbCIKZXhwb3J0IGRlZmF1bHQgewogICAgY29tcG9uZW50czogeyBDYXJvdXNlbCwgQXV0b0lucHV0IH0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGNhcm91c2VsSXRlbXM6IFtdLAogICAgICAgICAgICBzZWxlY3RlZFR5cGU6IHt9LAogICAgICAgICAgICBuZXdzVHlwZUxpc3Q6IFtdLAogICAgICAgICAgICBuZXdzTGlzdDogW10sCiAgICAgICAgICAgIGhlYWx0aE5ld3NUb3BMaXN0OiBbXSwKICAgICAgICAgICAgdG90YWw6IDAsCiAgICAgICAgICAgIGhlYWx0aE5ld3NRdWVyeUR0bzogewogICAgICAgICAgICAgICAgbmV3c1R5cGVJZDogbnVsbCwKICAgICAgICAgICAgICAgIGN1cnJlbnQ6IDEsCiAgICAgICAgICAgICAgICBzaXplOiAxMCwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGVmYXVsdFJlY29tbWVuZENvdW50OiAzLCAvLyDpu5jorqTlkJHnlKjmiLfmjqjojZDnmoTlgaXlurfmlrDpl7vmnaHmlbAKICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpIHsKICAgICAgICB0aGlzLmZldGNoTmV3c1R5cGVzKCk7CiAgICAgICAgLy8gdGhpcy5mZXRjaFJlY29tbWVuZEhlYWx0aE5ld3ModGhpcy5kZWZhdWx0UmVjb21tZW5kQ291bnQpOwogICAgICAgIHRoaXMuZmV0Y2hOZXdzVG9wKDEsIDMpOyAvLyDmn6U05p2hCiAgICAgICAgdGhpcy5mZXRjaFJlY29tbWVuZEhlYWx0aE5ld3ModGhpcy5kZWZhdWx0UmVjb21tZW5kQ291bnQpOwogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICAvLyDovpPlhaXmoYbnu4Tku7bovpPlhaXlm57kvKAKICAgICAgICBsaXN0ZW5lcih0ZXh0KSB7CiAgICAgICAgICAgIHRoaXMuaGVhbHRoTmV3c1F1ZXJ5RHRvLnRpdGxlID0gdGV4dDsgLy8g6LWL5YC85p+l6K+i5p2h5Lu255qE5YaF5a65CiAgICAgICAgICAgIHRoaXMuZmV0Y2hOZXdzKCk7IC8vIOmHjeaWsOWKoOi9veaVsOaNrgogICAgICAgIH0sCiAgICAgICAgbmV3c0NsaWNrKG5ld3MpIHsKICAgICAgICAgICAgd2luZG93Lm9wZW4oYC9uZXdzLWRldGFpbD9pZD0ke25ld3MuaWR9YCk7CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVTaXplQ2hhbmdlKHNpemUpIHsKICAgICAgICAgICAgdGhpcy5oZWFsdGhOZXdzUXVlcnlEdG8uc2l6ZSA9IHNpemU7CiAgICAgICAgICAgIHRoaXMuaGVhbHRoTmV3c1F1ZXJ5RHRvLmN1cnJlbnQgPSAxOwogICAgICAgICAgICB0aGlzLmZldGNoTmV3cygpOwogICAgICAgIH0sCiAgICAgICAgaGFuZGxlQ3VycmVudENoYW5nZShjdXJyZW50KSB7CiAgICAgICAgICAgIHRoaXMuaGVhbHRoTmV3c1F1ZXJ5RHRvLmN1cnJlbnQgPSBjdXJyZW50OwogICAgICAgICAgICB0aGlzLmZldGNoTmV3cygpOwogICAgICAgIH0sCiAgICAgICAgdHlwZUNoYW5nZSh0eXBlKSB7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUeXBlID0gdHlwZTsKICAgICAgICAgICAgdGhpcy5oZWFsdGhOZXdzUXVlcnlEdG8ubmV3c1R5cGVJZCA9IHR5cGUudmFsdWU7CiAgICAgICAgICAgIHRoaXMuZmV0Y2hOZXdzKCk7CiAgICAgICAgfSwKICAgICAgICBhc3luYyBmZXRjaFJlY29tbWVuZEhlYWx0aE5ld3MoY291bnQpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgdGhpcy4kYXhpb3MuZ2V0KGAvbmV3cy9yZWNvbW1lbmQvJHtjb3VudH1gKTsKICAgICAgICAgICAgICAgIHRoaXMuY2Fyb3VzZWxJdGVtcyA9IGRhdGEubWFwKGVudGl0eSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVudGl0eS5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGVudGl0eS50aXRsZSwKICAgICAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6IGVudGl0eS5zdW1tYXJ5LAogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZTogZW50aXR5LmNvdmVyCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbyhlcnJvci5tZXNzYWdlKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgZmV0Y2hOZXdzVHlwZXMoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IHRoaXMuJGF4aW9zLmdldCgnL25ld3MvdHlwZXMnKTsKICAgICAgICAgICAgICAgIHRoaXMubmV3c1R5cGVMaXN0ID0gZGF0YTsKICAgICAgICAgICAgICAgIHRoaXMubmV3c1R5cGVMaXN0LnVuc2hpZnQoeyB2YWx1ZTogbnVsbCwgbGFiZWw6ICLlhajpg6giIH0pOwogICAgICAgICAgICAgICAgdGhpcy50eXBlQ2hhbmdlKHRoaXMubmV3c1R5cGVMaXN0WzBdKTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbyhlcnJvci5tZXNzYWdlKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgZmV0Y2hOZXdzKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhLCB0b3RhbCB9ID0gYXdhaXQgdGhpcy4kYXhpb3MucG9zdCgnL25ld3MvbGlzdCcsIHRoaXMuaGVhbHRoTmV3c1F1ZXJ5RHRvKTsKICAgICAgICAgICAgICAgIHRoaXMubmV3c0xpc3QgPSBkYXRhOwogICAgICAgICAgICAgICAgdGhpcy50b3RhbCA9IHRvdGFsOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5pbmZvKGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhc3luYyBmZXRjaE5ld3NUb3AoY3VycmVudCwgc2l6ZSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgcXVlcnlEdG8gPSB7CiAgICAgICAgICAgICAgICAgICAgY3VycmVudCwKICAgICAgICAgICAgICAgICAgICBzaXplLAogICAgICAgICAgICAgICAgICAgIHNvcnRGaWVsZDogJ2RvdWJsZVNvcnQnLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCB0aGlzLiRheGlvcy5wb3N0KCcvbmV3cy9saXN0JywgcXVlcnlEdG8pOwogICAgICAgICAgICAgICAgdGhpcy5oZWFsdGhOZXdzVG9wTGlzdCA9IGRhdGE7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmluZm8oZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n    <div class=\"health-news-container\">\n        <div class=\"left\">\n            <div class=\"recommend\">\n                <Carousel @obj-detail=\"newsClick\" :carouselItems=\"carouselItems\" />\n            </div>\n            <div class=\"content\">\n                <div style=\"display: flex;justify-content: space-between;align-items: center;\">\n                    <div class=\"left-type\">\n                        <!-- 新闻类别 -->\n                        <div class=\"types\">\n                            <div :style=\"{\n                                backgroundColor: selectedType.value === type.value ? 'rgb(36, 136, 17)' : '',\n                                color: selectedType.value === type.value ? 'rgb(255,255,255)' : ''\n                            }\" @click=\"typeChange(type)\" class=\"type-item\" v-for=\"(type, index) in newsTypeList\"\n                                :key=\"index\">\n                                {{ type.label }}\n                            </div>\n                        </div>\n                    </div>\n                    <div style=\"display: flex;justify-content: flex-end;\">\n                        <AutoInput style=\"width: 200px;\" placeholder=\"搜索校园新闻\" @listener=\"listener\" />\n                    </div>\n                </div>\n                <!-- 新闻列表 -->\n                <div>\n                    <div class=\"health-news\">\n                        <div v-if=\"!newsList.length\">\n                            <el-empty description=\"暂无新闻信息\"></el-empty>\n                        </div>\n                        <div @click=\"newsClick(healthNews)\" class=\"item\" v-for=\"(healthNews, index) in newsList\"\n                            :key=\"index\">\n                            <img class=\"cover\" :src=\"healthNews.cover\" alt=\"\" srcset=\"\">\n                            <span class=\"view-count\">{{ healthNews.newsTypeName }}</span>\n                            <div class=\"title\">{{ healthNews.title }}</div>\n                        </div>\n                    </div>\n                    <div class=\"pager\">\n                        <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\n                            :current-page=\"healthNewsQueryDto.current\" :page-sizes=\"[10, 20]\"\n                            :page-size=\"healthNewsQueryDto.size\" layout=\"total, sizes, prev, pager, next, jumper\"\n                            :total=\"total\"></el-pagination>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"right\">\n            <h3 style=\"margin-top: 0;margin-left: 8px;\">最热新闻</h3>\n            <div class=\"item\" @click=\"newsClick(healthNews)\" v-for=\"(healthNews, index) in healthNewsTopList\"\n                :key=\"index\">\n                <img class=\"cover\" :src=\"healthNews.cover\" alt=\"\" srcset=\"\"></img>\n                <div class=\"title\">{{ healthNews.title }}</div>\n            </div>\n\n        </div>\n\n    </div>\n</template>\n\n<script>\nimport AutoInput from \"@/components/AutoInput.vue\"; // 导入封装好的输入框组件\nimport Carousel from \"@/components/Carousel\"\nexport default {\n    components: { Carousel, AutoInput },\n    data() {\n        return {\n            carouselItems: [],\n            selectedType: {},\n            newsTypeList: [],\n            newsList: [],\n            healthNewsTopList: [],\n            total: 0,\n            healthNewsQueryDto: {\n                newsTypeId: null,\n                current: 1,\n                size: 10,\n            },\n            defaultRecommendCount: 3, // 默认向用户推荐的健康新闻条数\n        }\n    },\n    created() {\n        this.fetchNewsTypes();\n        // this.fetchRecommendHealthNews(this.defaultRecommendCount);\n        this.fetchNewsTop(1, 3); // 查4条\n        this.fetchRecommendHealthNews(this.defaultRecommendCount);\n    },\n    methods: {\n        // 输入框组件输入回传\n        listener(text) {\n            this.healthNewsQueryDto.title = text; // 赋值查询条件的内容\n            this.fetchNews(); // 重新加载数据\n        },\n        newsClick(news) {\n            window.open(`/news-detail?id=${news.id}`);\n        },\n        handleSizeChange(size) {\n            this.healthNewsQueryDto.size = size;\n            this.healthNewsQueryDto.current = 1;\n            this.fetchNews();\n        },\n        handleCurrentChange(current) {\n            this.healthNewsQueryDto.current = current;\n            this.fetchNews();\n        },\n        typeChange(type) {\n            this.selectedType = type;\n            this.healthNewsQueryDto.newsTypeId = type.value;\n            this.fetchNews();\n        },\n        async fetchRecommendHealthNews(count) {\n            try {\n                const { data } = await this.$axios.get(`/news/recommend/${count}`);\n                this.carouselItems = data.map(entity => {\n                    return {\n                        id: entity.id,\n                        title: entity.title,\n                        subtitle: entity.summary,\n                        image: entity.cover\n                    }\n                })\n            } catch (error) {\n                this.$message.info(error.message);\n            }\n        },\n        async fetchNewsTypes() {\n            try {\n                const { data } = await this.$axios.get('/news/types');\n                this.newsTypeList = data;\n                this.newsTypeList.unshift({ value: null, label: \"全部\" });\n                this.typeChange(this.newsTypeList[0]);\n            } catch (error) {\n                this.$message.info(error.message);\n            }\n        },\n        async fetchNews() {\n            try {\n                const { data, total } = await this.$axios.post('/news/list', this.healthNewsQueryDto);\n                this.newsList = data;\n                this.total = total;\n            } catch (error) {\n                this.$message.info(error.message);\n            }\n        },\n        async fetchNewsTop(current, size) {\n            try {\n                const queryDto = {\n                    current,\n                    size,\n                    sortField: 'doubleSort',\n                }\n                const { data } = await this.$axios.post('/news/list', queryDto);\n                this.healthNewsTopList = data;\n            } catch (error) {\n                this.$message.info(error.message);\n            }\n        }\n    }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.health-news-container {\n    display: flex;\n    gap: 30px;\n    margin-block: 30px;\n\n    .left {\n        width: 80%;\n        box-sizing: border-box;\n    }\n\n    .right {\n        width: 20%;\n        box-sizing: border-box;\n        box-shadow: 0 4px 6px rgb(240, 240, 240);\n        padding: 20px;\n\n        .item {\n            margin-bottom: 10px;\n            cursor: pointer;\n            padding: 10px;\n\n            &:hover {\n                transform: translateY(-2px);\n            }\n\n            .cover {\n                width: 100%;\n                height: 110px;\n                border-radius: 5px;\n            }\n        }\n    }\n\n    // .recommend {\n    //     background-color: rgb(246, 246, 246);\n    // }\n\n    .content {\n\n        .left-type {\n            .types {\n                padding-block: 20px;\n                display: flex;\n                flex-wrap: wrap;\n                align-items: center;\n                gap: 20px;\n\n                .type-item {\n                    padding: 6px 12px;\n                    border-radius: 20px;\n                    cursor: pointer;\n\n                    &:hover {\n                        background-color: rgb(246, 246, 246);\n                    }\n                }\n            }\n        }\n\n        .pager {\n            display: flex;\n            justify-content: flex-end;\n        }\n\n\n        .health-news {\n            display: flex;\n            flex-wrap: wrap;\n            padding: 20px 0;\n            gap: 15px;\n            /* 添加间距 */\n        }\n\n        .health-news .item {\n            flex: 0 0 calc(20% - 15px);\n            /* 每行5个，减去间距 */\n            max-width: calc(20% - 15px);\n            /* 防止flex布局在某些情况下失效 */\n            box-sizing: border-box;\n            cursor: pointer;\n            transition: transform 0.3s ease;\n            position: relative;\n        }\n\n        .view-count {\n            position: absolute;\n            top: 0;\n            left: 0;\n            color: rgb(255, 255, 255);\n            display: inline-block;\n            // border-radius: 5px;\n            border-top-left-radius: 5px;\n            border-bottom-right-radius: 5px;\n            padding: 2px 8px;\n            font-size: 12px;\n            font-weight: 600;\n            background-color: rgba(0, 0, 0, 0.6);\n\n            i {\n                margin-right: 4px;\n            }\n        }\n\n        .health-news .item:hover {\n            transform: translateY(-5px);\n        }\n\n        .health-news .cover {\n            width: 100%;\n            height: 110px;\n            object-fit: cover;\n            border-radius: 8px;\n            margin-bottom: 10px;\n        }\n\n        .health-news .title {\n            font-size: 16px;\n            font-weight: 500;\n            white-space: nowrap;\n            /* 不换行 */\n            overflow: hidden;\n            /* 超出隐藏 */\n            text-overflow: ellipsis;\n            /* 显示省略号 */\n            padding: 0 5px;\n        }\n    }\n}\n</style>"]}]}