{"remainingRequest":"C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\src\\views\\admin\\UpdatePassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\src\\views\\admin\\UpdatePassword.vue","mtime":1748879833000},{"path":"C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1770531376377},{"path":"C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\node_modules\\vue-loader\\lib\\index.js","mtime":1770531338936}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBjbGVhclRva2VuLCBjbGVhclJvbGUsIGNsZWFyVXNlckluZm9vIH0gZnJvbSAiQC91dGlscy9zdG9yYWdlIg0KaW1wb3J0IHsgY2xlYXJVc2VySW5mbyB9IGZyb20gIi4uLy4uL3V0aWxzL3N0b3JhZ2UiOw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJVcGRhdGVQYXNzd29yZCIsDQogICAgZGF0YSgpIHsNCiAgICAgICAgY29uc3QgdmFsaWRhdGVQYXNzd29yZCA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsNCiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHsNCiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+i+k+WFpeWvhueggScpKTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUubGVuZ3RoIDwgOCB8fCB2YWx1ZS5sZW5ndGggPiAyMCkgew0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign5a+G56CB6ZW/5bqm6ZyA5ZyoOC0yMOS9jeS5i+mXtCcpKTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoIS9bYS16QS1aXS8udGVzdCh2YWx1ZSkgfHwgIS9cZC8udGVzdCh2YWx1ZSkpIHsNCiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+WvhueggemcgOWMheWQq+Wtl+avjeWSjOaVsOWtlycpKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuZm9ybS5hZ2FpblBhc3N3b3JkICE9PSAnJykgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLnBhc3N3b3JkRm9ybS52YWxpZGF0ZUZpZWxkKCdhZ2FpblBhc3N3b3JkJyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc3QgdmFsaWRhdGVBZ2FpblBhc3N3b3JkID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gew0KICAgICAgICAgICAgaWYgKHZhbHVlID09PSAnJykgew0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+35YaN5qyh6L6T5YWl5a+G56CBJykpOw0KICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSAhPT0gdGhpcy5mb3JtLm5ld1Bhc3N3b3JkKSB7DQogICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfkuKTmrKHovpPlhaXlr4bnoIHkuI3kuIDoh7QnKSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQoNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLA0KICAgICAgICAgICAgZm9ybTogew0KICAgICAgICAgICAgICAgIG9sZFBhc3N3b3JkOiAnJywNCiAgICAgICAgICAgICAgICBuZXdQYXNzd29yZDogJycsDQogICAgICAgICAgICAgICAgYWdhaW5QYXNzd29yZDogJycNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBydWxlczogew0KICAgICAgICAgICAgICAgIG9sZFBhc3N3b3JkOiBbDQogICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXlvZPliY3lr4bnoIEnLCB0cmlnZ2VyOiAnYmx1cicgfQ0KICAgICAgICAgICAgICAgIF0sDQogICAgICAgICAgICAgICAgbmV3UGFzc3dvcmQ6IFsNCiAgICAgICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgdmFsaWRhdG9yOiB2YWxpZGF0ZVBhc3N3b3JkLCB0cmlnZ2VyOiAnYmx1cicgfQ0KICAgICAgICAgICAgICAgIF0sDQogICAgICAgICAgICAgICAgYWdhaW5QYXNzd29yZDogWw0KICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCB2YWxpZGF0b3I6IHZhbGlkYXRlQWdhaW5QYXNzd29yZCwgdHJpZ2dlcjogJ2JsdXInIH0NCiAgICAgICAgICAgICAgICBdDQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIHN1Ym1pdEZvcm0oKSB7DQogICAgICAgICAgICB0aGlzLiRyZWZzLnBhc3N3b3JkRm9ybS52YWxpZGF0ZSh2YWxpZCA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVBhc3N3b3JkRHRvID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgb2xkUGFzc3dvcmQ6IHRoaXMuJG1kNSh0aGlzLiRtZDUodGhpcy5mb3JtLm9sZFBhc3N3b3JkKSksDQogICAgICAgICAgICAgICAgICAgICAgICBuZXdQYXNzd29yZDogdGhpcy4kbWQ1KHRoaXMuJG1kNSh0aGlzLmZvcm0ubmV3UGFzc3dvcmQpKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGFnYWluUGFzc3dvcmQ6IHRoaXMuJG1kNSh0aGlzLiRtZDUodGhpcy5mb3JtLmFnYWluUGFzc3dvcmQpKSwNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRheGlvcy5wdXQoJy91c2VyL3VwZGF0ZVBhc3N3b3JkJywgdXBkYXRlUGFzc3dvcmREdG8pDQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WvhueggeS/ruaUueaIkOWKn++8jOivt+mHjeaWsOeZu+W9lScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmuIXnqbrooajljZUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5wYXNzd29yZEZvcm0ucmVzZXRGaWVsZHMoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUb2tlbigpOy8v5riF56m6VG9rZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJSb2xlKCk7IC8vIOa4heepuuinkuiJsg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclVzZXJJbmZvKCk7IC8vIOa4heepuueUqOaIt+S/oeaBrw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xvZ2luJyk7IC8vIOi/lOWbnueZu+W9lemhtQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcG9uc2UubWVzc2FnZSB8fCAn5a+G56CB5L+u5pS55aSx6LSlJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihlcnJvci5tZXNzYWdlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICB9DQp9Ow0K"},{"version":3,"sources":["UpdatePassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UpdatePassword.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\r\n    <div class=\"password-container\">\r\n        <div class=\"password-card\">\r\n            <el-form ref=\"passwordForm\" :model=\"form\" :rules=\"rules\" label-position=\"top\"\r\n                @submit.native.prevent=\"submitForm\">\r\n                <el-form-item label=\"当前密码\" prop=\"oldPassword\">\r\n                    <el-input v-model=\"form.oldPassword\" type=\"password\" placeholder=\"请输入当前密码\" show-password\r\n                        clearable></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"新密码\" prop=\"newPassword\">\r\n                    <el-input v-model=\"form.newPassword\" type=\"password\" placeholder=\"请输入新密码\" show-password\r\n                        clearable></el-input>\r\n                    <div class=\"password-hint\">密码长度8-20位，需包含字母和数字</div>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"确认新密码\" prop=\"againPassword\">\r\n                    <el-input v-model=\"form.againPassword\" type=\"password\" placeholder=\"请再次输入新密码\" show-password\r\n                        clearable></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" native-type=\"submit\" :loading=\"loading\" class=\"submit-btn\">\r\n                        确认修改\r\n                    </el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { clearToken, clearRole, clearUserInfoo } from \"@/utils/storage\"\r\nimport { clearUserInfo } from \"../../utils/storage\";\r\nexport default {\r\n    name: \"UpdatePassword\",\r\n    data() {\r\n        const validatePassword = (rule, value, callback) => {\r\n            if (value === '') {\r\n                callback(new Error('请输入密码'));\r\n            } else if (value.length < 8 || value.length > 20) {\r\n                callback(new Error('密码长度需在8-20位之间'));\r\n            } else if (!/[a-zA-Z]/.test(value) || !/\\d/.test(value)) {\r\n                callback(new Error('密码需包含字母和数字'));\r\n            } else {\r\n                if (this.form.againPassword !== '') {\r\n                    this.$refs.passwordForm.validateField('againPassword');\r\n                }\r\n                callback();\r\n            }\r\n        };\r\n\r\n        const validateAgainPassword = (rule, value, callback) => {\r\n            if (value === '') {\r\n                callback(new Error('请再次输入密码'));\r\n            } else if (value !== this.form.newPassword) {\r\n                callback(new Error('两次输入密码不一致'));\r\n            } else {\r\n                callback();\r\n            }\r\n        };\r\n\r\n        return {\r\n            loading: false,\r\n            form: {\r\n                oldPassword: '',\r\n                newPassword: '',\r\n                againPassword: ''\r\n            },\r\n            rules: {\r\n                oldPassword: [\r\n                    { required: true, message: '请输入当前密码', trigger: 'blur' }\r\n                ],\r\n                newPassword: [\r\n                    { required: true, validator: validatePassword, trigger: 'blur' }\r\n                ],\r\n                againPassword: [\r\n                    { required: true, validator: validateAgainPassword, trigger: 'blur' }\r\n                ]\r\n            }\r\n        };\r\n    },\r\n    methods: {\r\n        submitForm() {\r\n            this.$refs.passwordForm.validate(valid => {\r\n                if (valid) {\r\n                    this.loading = true;\r\n                    const updatePasswordDto = {\r\n                        oldPassword: this.$md5(this.$md5(this.form.oldPassword)),\r\n                        newPassword: this.$md5(this.$md5(this.form.newPassword)),\r\n                        againPassword: this.$md5(this.$md5(this.form.againPassword)),\r\n                    }\r\n                    this.$axios.put('/user/updatePassword', updatePasswordDto)\r\n                        .then(response => {\r\n                            if (response.code === 200) {\r\n                                this.$message.success('密码修改成功，请重新登录');\r\n                                // 清空表单\r\n                                this.$refs.passwordForm.resetFields();\r\n                                clearToken();//清空Token\r\n                                clearRole(); // 清空角色\r\n                                clearUserInfo(); // 清空用户信息\r\n                                this.$router.push('/login'); // 返回登录页\r\n                            } else {\r\n                                this.$message.error(response.message || '密码修改失败');\r\n                            }\r\n                        })\r\n                        .catch(error => {\r\n                            this.$message.error(error.message);\r\n                        })\r\n                        .finally(() => {\r\n                            this.loading = false;\r\n                        });\r\n                } else {\r\n                    return false;\r\n                }\r\n            });\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.password-container {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 430px;\r\n    padding-block: 20px;\r\n}\r\n\r\n.password-card {\r\n    width: 100%;\r\n    background-color: #fff;\r\n    border-radius: 12px;\r\n    //box-shadow: 0 8px 12px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.password-title {\r\n    margin-bottom: 30px;\r\n    text-align: center;\r\n    color: #303133;\r\n    font-weight: 500;\r\n    font-size: 24px;\r\n}\r\n\r\n::v-deep .el-form-item__label {\r\n    font-weight: 500;\r\n    color: #606266;\r\n    padding-bottom: 8px;\r\n}\r\n\r\n::v-deep .el-input__inner {\r\n    height: 44px;\r\n    line-height: 44px;\r\n    border-radius: 8px;\r\n}\r\n\r\n.password-hint {\r\n    font-size: 12px;\r\n    color: #909399;\r\n    margin-top: 6px;\r\n}\r\n\r\n.submit-btn {\r\n    width: 100%;\r\n    height: 44px;\r\n    border-radius: 8px;\r\n    font-size: 16px;\r\n    margin-top: 10px;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n    .password-card {\r\n        padding: 30px 20px;\r\n    }\r\n}\r\n</style>"]}]}