{"remainingRequest":"C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\src\\views\\admin\\Home.vue?vue&type=style&index=0&id=a44c444e&scoped=true&lang=scss&","dependencies":[{"path":"C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\src\\views\\admin\\Home.vue","mtime":1748933781000},{"path":"C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\node_modules\\css-loader\\dist\\cjs.js","mtime":1770531371325},{"path":"C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1770531338946},{"path":"C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\node_modules\\postcss-loader\\src\\index.js","mtime":1770531352754},{"path":"C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1770531346550},{"path":"C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1770531376377},{"path":"C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\node_modules\\vue-loader\\lib\\index.js","mtime":1770531338936}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouYWRtaW4tbGF5b3V0IHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBoZWlnaHQ6IDEwMHZoOwogICAgd2lkdGg6IDEwMCU7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjUwLCAyNTAsIDI1MCk7CgogICAgLnNpZGViYXIgewogICAgICAgIHdpZHRoOiAyMDZweDsKICAgICAgICBtaW4td2lkdGg6IDYwcHg7CiAgICAgICAgaGVpZ2h0OiAxMDB2aDsKICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgIHBhZGRpbmctdG9wOiAxMHB4OwogICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYigyNTAsIDI1MCwgMjUwKTsKICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2LWJpbmQobWVudUJnQ29sb3IpOwogICAgICAgIHRyYW5zaXRpb246IHdpZHRoIDAuM3MgZWFzZTsKICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CgogICAgICAgIC5sb2dvLWNvbnRhaW5lciB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIHBhZGRpbmc6IDAgNDBweDsKICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDA7CiAgICAgICAgfQogICAgfQoKICAgIC5kcm9wZG93bi1pbmZvIHsKICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgZ2FwOiA2cHg7CiAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYigyNDgsIDI0OCwgMjQ4KTsKICAgICAgICBwYWRkaW5nOiA0cHggMTBweDsKICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4OwoKICAgICAgICAmOmhvdmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDIzOSwgMjQwLCAyNDApOwogICAgICAgIH0KCiAgICAgICAgaW1nIHsKICAgICAgICAgICAgd2lkdGg6IDMwcHg7CiAgICAgICAgICAgIGhlaWdodDogMzBweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICAgIH0KCiAgICAgICAgc3BhbiB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgICB9CiAgICB9CgogICAgLmNvbnRlbnQtYXJlYSB7CiAgICAgICAgZmxleDogMTsKICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjU1LCAyNTUsIDI1NSk7CgogICAgICAgIC50b3AtaW5mbyB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgcGFkZGluZzogMjBweCA0MHB4OwoKICAgICAgICAgICAgLnBvaW50LXRleHQgewogICAgICAgICAgICAgICAgZm9udC1zaXplOiAyMnB4OwogICAgICAgICAgICB9CgogICAgICAgIH0KCiAgICAgICAgLnJvdXRlci12aWV3IHsKICAgICAgICAgICAgZmxleDogMTsKICAgICAgICAgICAgcGFkZGluZzogMCA2cHg7CiAgICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\n    <div class=\"admin-layout\">\n        <!-- 左侧导航菜单 - 菜单组件 -->\n        <aside class=\"sidebar\">\n            <Menu @route-listener=\"route\" :routes=\"adminRoutes\" :bag=\"menuBgColor\" @select=\"handleRouteSelect\" />\n        </aside>\n        <!-- 右侧内容区域 -->\n        <main class=\"content-area\">\n            <div class=\"top-info\">\n                <div class=\"point-text\">{{ activeRoute.name }}</div>\n                <div class=\"user-info\">\n                    <el-dropdown trigger=\"click\" placement=\"bottom-end\">\n                        <span class=\"el-dropdown-link\">\n                            <div class=\"dropdown-info\">\n                                <img :src=\"userInfo.avatar\" />\n                                <span>{{ userInfo.username }}</span>\n                            </div>\n                        </span>\n                        <el-dropdown-menu slot=\"dropdown\">\n                            <el-dropdown-item @click.native=\"dialogPasswordVisible = true\" icon=\"el-icon-view\">\n                                修改密码\n                            </el-dropdown-item>\n                            <el-dropdown-item @click.native=\"handleLoginOut\" icon=\"el-icon-s-fold\">\n                                退出登录\n                            </el-dropdown-item>\n                        </el-dropdown-menu>\n                    </el-dropdown>\n                </div>\n            </div>\n            <section class=\"router-view\">\n                <router-view></router-view>\n            </section>\n        </main>\n\n        <el-dialog title=\"修改密码\" :visible.sync=\"dialogPasswordVisible\" :closeOnClickModal=\"false\" width=\"35%\">\n            <UpdatePassword />\n        </el-dialog>\n    </div>\n</template>\n\n<script>\n\n// B站「程序员辰星」原创出品\nimport { get } from \"@/utils/request\"\nimport router from \"@/router/index\";\nimport { clearToken, clearRole, clearUserInfo, setUserInfo } from \"@/utils/storage\"\nimport Menu from '@/components/Menu.vue';\nimport UpdatePassword from '@/views/admin/UpdatePassword.vue';\nimport LevelHeader from '@/components/LevelHeader.vue';\n\nexport default {\n    name: \"admin-layout\",\n    components: { LevelHeader, Menu, UpdatePassword },\n    data() {\n        return {\n            dialogPasswordVisible: false, // 退出登录弹窗开关\n            adminRoutes: [], // 管理员路由信息\n            userInfo: {}, // 用户信息\n            activeRoute: {},\n            logoColor: 'rgb(51,51,51)', // Logo字体颜色\n            menuBgColor: 'rgb(250,250,250)' // 功能导航栏背景色\n        };\n    },\n    created() {\n        this.loadAdminRoutes();\n        this.checkTokenAndLoadUser();\n        this.handleRouteSelect('/adminLayout'); // 默认加载首页\n    },\n    methods: {\n\n        handleLoginOut() {\n            clearToken();\n            clearRole();\n            clearUserInfo();\n            this.$message.success('退出登录成功');\n            this.$router.push('/login');\n        },\n\n        // 路由切换\n        route(activeRoute) {\n            this.activeRoute = activeRoute;\n        },\n\n        // 路由跳转\n        handleRouteSelect(routePath) {\n            const route = this.adminRoutes.find(r => r.path === routePath);\n            if (route) {\n                if (this.$route.path !== routePath) {\n                    this.activeRoute = { ...route };\n                    this.$router.push(routePath);\n                }\n            }\n        },\n\n        // 加载管理员路由\n        loadAdminRoutes() {\n            const adminRoute = router.options.routes.find(r => r.path === '/admin');\n            this.adminRoutes = (adminRoute && adminRoute.children) || [];\n        },\n\n        // 检查用户登录状态 - 校验Token令牌\n        async checkTokenAndLoadUser() {\n            try {\n                const response = await get('user/auth');\n\n                if (response.code === 400) {\n                    this.$notify.error({\n                        title: 'token校验异常',\n                        message: response.message,\n                        duration: 2000,\n                    });\n                    clearToken();\n                    this.$router.push('/login');\n                }\n\n                this.userInfo = response.data;\n\n                setUserInfo(this.userInfo); // 存储用户信息\n            } catch (error) {\n                console.error('token认证错误「Home.vue」:', error);\n                this.$notify.error({\n                    title: 'token校验异常,请重新登录',\n                    message: error.message,\n                    duration: 2000,\n                });\n                clearToken();\n                this.$router.push('/login');\n            }\n        }\n    }\n};\n</script>\n\n<style scoped lang=\"scss\">\n.admin-layout {\n    display: flex;\n    height: 100vh;\n    width: 100%;\n    background-color: rgb(250, 250, 250);\n\n    .sidebar {\n        width: 206px;\n        min-width: 60px;\n        height: 100vh;\n        box-sizing: border-box;\n        padding-top: 10px;\n        background-color: rgb(250, 250, 250);\n        background-color: v-bind(menuBgColor);\n        transition: width 0.3s ease;\n        position: relative;\n\n        .logo-container {\n            display: flex;\n            align-items: center;\n            padding: 0 40px;\n            margin: 10px 0;\n        }\n    }\n\n    .dropdown-info {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        gap: 6px;\n        cursor: pointer;\n        background-color: rgb(248, 248, 248);\n        padding: 4px 10px;\n        border-radius: 10px;\n\n        &:hover {\n            background-color: rgb(239, 240, 240);\n        }\n\n        img {\n            width: 30px;\n            height: 30px;\n            border-radius: 50%;\n        }\n\n        span {\n            font-size: 16px;\n        }\n    }\n\n    .content-area {\n        flex: 1;\n        display: flex;\n        flex-direction: column;\n        overflow: hidden;\n        background-color: rgb(255, 255, 255);\n\n        .top-info {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            padding: 20px 40px;\n\n            .point-text {\n                font-size: 22px;\n            }\n\n        }\n\n        .router-view {\n            flex: 1;\n            padding: 0 6px;\n            overflow-y: auto;\n        }\n    }\n}\n</style>"]}]}