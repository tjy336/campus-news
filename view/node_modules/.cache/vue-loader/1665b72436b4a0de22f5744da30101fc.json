{"remainingRequest":"C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\src\\views\\admin\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\src\\views\\admin\\Home.vue","mtime":1748933781000},{"path":"C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1770531376377},{"path":"C:\\Users\\86184\\Desktop\\校园新闻系统\\source code\\view\\node_modules\\vue-loader\\lib\\index.js","mtime":1770531338936}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgovLyBC56uZ44CM56iL5bqP5ZGY6L6w5pif44CN5Y6f5Yib5Ye65ZOBCmltcG9ydCB7IGdldCB9IGZyb20gIkAvdXRpbHMvcmVxdWVzdCIKaW1wb3J0IHJvdXRlciBmcm9tICJAL3JvdXRlci9pbmRleCI7CmltcG9ydCB7IGNsZWFyVG9rZW4sIGNsZWFyUm9sZSwgY2xlYXJVc2VySW5mbywgc2V0VXNlckluZm8gfSBmcm9tICJAL3V0aWxzL3N0b3JhZ2UiCmltcG9ydCBNZW51IGZyb20gJ0AvY29tcG9uZW50cy9NZW51LnZ1ZSc7CmltcG9ydCBVcGRhdGVQYXNzd29yZCBmcm9tICdAL3ZpZXdzL2FkbWluL1VwZGF0ZVBhc3N3b3JkLnZ1ZSc7CmltcG9ydCBMZXZlbEhlYWRlciBmcm9tICdAL2NvbXBvbmVudHMvTGV2ZWxIZWFkZXIudnVlJzsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJhZG1pbi1sYXlvdXQiLAogICAgY29tcG9uZW50czogeyBMZXZlbEhlYWRlciwgTWVudSwgVXBkYXRlUGFzc3dvcmQgfSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZGlhbG9nUGFzc3dvcmRWaXNpYmxlOiBmYWxzZSwgLy8g6YCA5Ye655m75b2V5by556qX5byA5YWzCiAgICAgICAgICAgIGFkbWluUm91dGVzOiBbXSwgLy8g566h55CG5ZGY6Lev55Sx5L+h5oGvCiAgICAgICAgICAgIHVzZXJJbmZvOiB7fSwgLy8g55So5oi35L+h5oGvCiAgICAgICAgICAgIGFjdGl2ZVJvdXRlOiB7fSwKICAgICAgICAgICAgbG9nb0NvbG9yOiAncmdiKDUxLDUxLDUxKScsIC8vIExvZ2/lrZfkvZPpopzoibIKICAgICAgICAgICAgbWVudUJnQ29sb3I6ICdyZ2IoMjUwLDI1MCwyNTApJyAvLyDlip/og73lr7zoiKrmoI/og4zmma/oibIKICAgICAgICB9OwogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgdGhpcy5sb2FkQWRtaW5Sb3V0ZXMoKTsKICAgICAgICB0aGlzLmNoZWNrVG9rZW5BbmRMb2FkVXNlcigpOwogICAgICAgIHRoaXMuaGFuZGxlUm91dGVTZWxlY3QoJy9hZG1pbkxheW91dCcpOyAvLyDpu5jorqTliqDovb3pppbpobUKICAgIH0sCiAgICBtZXRob2RzOiB7CgogICAgICAgIGhhbmRsZUxvZ2luT3V0KCkgewogICAgICAgICAgICBjbGVhclRva2VuKCk7CiAgICAgICAgICAgIGNsZWFyUm9sZSgpOwogICAgICAgICAgICBjbGVhclVzZXJJbmZvKCk7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn6YCA5Ye655m75b2V5oiQ5YqfJyk7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbG9naW4nKTsKICAgICAgICB9LAoKICAgICAgICAvLyDot6/nlLHliIfmjaIKICAgICAgICByb3V0ZShhY3RpdmVSb3V0ZSkgewogICAgICAgICAgICB0aGlzLmFjdGl2ZVJvdXRlID0gYWN0aXZlUm91dGU7CiAgICAgICAgfSwKCiAgICAgICAgLy8g6Lev55Sx6Lez6L2sCiAgICAgICAgaGFuZGxlUm91dGVTZWxlY3Qocm91dGVQYXRoKSB7CiAgICAgICAgICAgIGNvbnN0IHJvdXRlID0gdGhpcy5hZG1pblJvdXRlcy5maW5kKHIgPT4gci5wYXRoID09PSByb3V0ZVBhdGgpOwogICAgICAgICAgICBpZiAocm91dGUpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXRoICE9PSByb3V0ZVBhdGgpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVJvdXRlID0geyAuLi5yb3V0ZSB9OwogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHJvdXRlUGF0aCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICAvLyDliqDovb3nrqHnkIblkZjot6/nlLEKICAgICAgICBsb2FkQWRtaW5Sb3V0ZXMoKSB7CiAgICAgICAgICAgIGNvbnN0IGFkbWluUm91dGUgPSByb3V0ZXIub3B0aW9ucy5yb3V0ZXMuZmluZChyID0+IHIucGF0aCA9PT0gJy9hZG1pbicpOwogICAgICAgICAgICB0aGlzLmFkbWluUm91dGVzID0gKGFkbWluUm91dGUgJiYgYWRtaW5Sb3V0ZS5jaGlsZHJlbikgfHwgW107CiAgICAgICAgfSwKCiAgICAgICAgLy8g5qOA5p+l55So5oi355m75b2V54q25oCBIC0g5qCh6aqMVG9rZW7ku6TniYwKICAgICAgICBhc3luYyBjaGVja1Rva2VuQW5kTG9hZFVzZXIoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldCgndXNlci9hdXRoJyk7CgogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDQwMCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJG5vdGlmeS5lcnJvcih7CiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAndG9rZW7moKHpqozlvILluLgnLAogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5tZXNzYWdlLAogICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjAwMCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBjbGVhclRva2VuKCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRoaXMudXNlckluZm8gPSByZXNwb25zZS5kYXRhOwoKICAgICAgICAgICAgICAgIHNldFVzZXJJbmZvKHRoaXMudXNlckluZm8pOyAvLyDlrZjlgqjnlKjmiLfkv6Hmga8KICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3Rva2Vu6K6k6K+B6ZSZ6K+v44CMSG9tZS52dWXjgI06JywgZXJyb3IpOwogICAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ3Rva2Vu5qCh6aqM5byC5bi4LOivt+mHjeaWsOeZu+W9lScsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwKICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjAwMCwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY2xlYXJUb2tlbigpOwogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9Owo="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\n    <div class=\"admin-layout\">\n        <!-- 左侧导航菜单 - 菜单组件 -->\n        <aside class=\"sidebar\">\n            <Menu @route-listener=\"route\" :routes=\"adminRoutes\" :bag=\"menuBgColor\" @select=\"handleRouteSelect\" />\n        </aside>\n        <!-- 右侧内容区域 -->\n        <main class=\"content-area\">\n            <div class=\"top-info\">\n                <div class=\"point-text\">{{ activeRoute.name }}</div>\n                <div class=\"user-info\">\n                    <el-dropdown trigger=\"click\" placement=\"bottom-end\">\n                        <span class=\"el-dropdown-link\">\n                            <div class=\"dropdown-info\">\n                                <img :src=\"userInfo.avatar\" />\n                                <span>{{ userInfo.username }}</span>\n                            </div>\n                        </span>\n                        <el-dropdown-menu slot=\"dropdown\">\n                            <el-dropdown-item @click.native=\"dialogPasswordVisible = true\" icon=\"el-icon-view\">\n                                修改密码\n                            </el-dropdown-item>\n                            <el-dropdown-item @click.native=\"handleLoginOut\" icon=\"el-icon-s-fold\">\n                                退出登录\n                            </el-dropdown-item>\n                        </el-dropdown-menu>\n                    </el-dropdown>\n                </div>\n            </div>\n            <section class=\"router-view\">\n                <router-view></router-view>\n            </section>\n        </main>\n\n        <el-dialog title=\"修改密码\" :visible.sync=\"dialogPasswordVisible\" :closeOnClickModal=\"false\" width=\"35%\">\n            <UpdatePassword />\n        </el-dialog>\n    </div>\n</template>\n\n<script>\n\n// B站「程序员辰星」原创出品\nimport { get } from \"@/utils/request\"\nimport router from \"@/router/index\";\nimport { clearToken, clearRole, clearUserInfo, setUserInfo } from \"@/utils/storage\"\nimport Menu from '@/components/Menu.vue';\nimport UpdatePassword from '@/views/admin/UpdatePassword.vue';\nimport LevelHeader from '@/components/LevelHeader.vue';\n\nexport default {\n    name: \"admin-layout\",\n    components: { LevelHeader, Menu, UpdatePassword },\n    data() {\n        return {\n            dialogPasswordVisible: false, // 退出登录弹窗开关\n            adminRoutes: [], // 管理员路由信息\n            userInfo: {}, // 用户信息\n            activeRoute: {},\n            logoColor: 'rgb(51,51,51)', // Logo字体颜色\n            menuBgColor: 'rgb(250,250,250)' // 功能导航栏背景色\n        };\n    },\n    created() {\n        this.loadAdminRoutes();\n        this.checkTokenAndLoadUser();\n        this.handleRouteSelect('/adminLayout'); // 默认加载首页\n    },\n    methods: {\n\n        handleLoginOut() {\n            clearToken();\n            clearRole();\n            clearUserInfo();\n            this.$message.success('退出登录成功');\n            this.$router.push('/login');\n        },\n\n        // 路由切换\n        route(activeRoute) {\n            this.activeRoute = activeRoute;\n        },\n\n        // 路由跳转\n        handleRouteSelect(routePath) {\n            const route = this.adminRoutes.find(r => r.path === routePath);\n            if (route) {\n                if (this.$route.path !== routePath) {\n                    this.activeRoute = { ...route };\n                    this.$router.push(routePath);\n                }\n            }\n        },\n\n        // 加载管理员路由\n        loadAdminRoutes() {\n            const adminRoute = router.options.routes.find(r => r.path === '/admin');\n            this.adminRoutes = (adminRoute && adminRoute.children) || [];\n        },\n\n        // 检查用户登录状态 - 校验Token令牌\n        async checkTokenAndLoadUser() {\n            try {\n                const response = await get('user/auth');\n\n                if (response.code === 400) {\n                    this.$notify.error({\n                        title: 'token校验异常',\n                        message: response.message,\n                        duration: 2000,\n                    });\n                    clearToken();\n                    this.$router.push('/login');\n                }\n\n                this.userInfo = response.data;\n\n                setUserInfo(this.userInfo); // 存储用户信息\n            } catch (error) {\n                console.error('token认证错误「Home.vue」:', error);\n                this.$notify.error({\n                    title: 'token校验异常,请重新登录',\n                    message: error.message,\n                    duration: 2000,\n                });\n                clearToken();\n                this.$router.push('/login');\n            }\n        }\n    }\n};\n</script>\n\n<style scoped lang=\"scss\">\n.admin-layout {\n    display: flex;\n    height: 100vh;\n    width: 100%;\n    background-color: rgb(250, 250, 250);\n\n    .sidebar {\n        width: 206px;\n        min-width: 60px;\n        height: 100vh;\n        box-sizing: border-box;\n        padding-top: 10px;\n        background-color: rgb(250, 250, 250);\n        background-color: v-bind(menuBgColor);\n        transition: width 0.3s ease;\n        position: relative;\n\n        .logo-container {\n            display: flex;\n            align-items: center;\n            padding: 0 40px;\n            margin: 10px 0;\n        }\n    }\n\n    .dropdown-info {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        gap: 6px;\n        cursor: pointer;\n        background-color: rgb(248, 248, 248);\n        padding: 4px 10px;\n        border-radius: 10px;\n\n        &:hover {\n            background-color: rgb(239, 240, 240);\n        }\n\n        img {\n            width: 30px;\n            height: 30px;\n            border-radius: 50%;\n        }\n\n        span {\n            font-size: 16px;\n        }\n    }\n\n    .content-area {\n        flex: 1;\n        display: flex;\n        flex-direction: column;\n        overflow: hidden;\n        background-color: rgb(255, 255, 255);\n\n        .top-info {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            padding: 20px 40px;\n\n            .point-text {\n                font-size: 22px;\n            }\n\n        }\n\n        .router-view {\n            flex: 1;\n            padding: 0 6px;\n            overflow-y: auto;\n        }\n    }\n}\n</style>"]}]}